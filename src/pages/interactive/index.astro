---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('interactive', ({ data }) => !data.draft && !data.unlisted)).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={"Interactive Articles"} description={"Hands-on, interactive write-ups and demos"} />
    <style>
      main { width: 960px; }
      ul { list-style: none; margin: 0; padding: 0; }
      li { padding: 1rem 0; border-bottom: 1px solid rgb(var(--gray-light)); }
      li:last-child { border-bottom: none; }
      a { display: block; text-decoration: none; }
      .title { margin: 0; color: rgb(var(--black)); line-height: 1.2; }
      .date { margin: 0.25rem 0 0; color: rgb(var(--gray)); }
      a:hover .title, a:hover .date { color: rgb(var(--accent)); }
      @media (max-width: 720px) { main { width: 100%; } }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <section>
        <h1>Interactive Articles</h1>
        <p style="color: rgb(var(--gray));">Interactive, self-contained pages with demos and visualizations.</p>
        <ul>
          {posts.map((post) => (
            <li>
              <a href={post.data.externalUrl ?? `/interactive/${post.id}/`}>
                <h4 class="title">{post.data.title}</h4>
                <p class="date"><FormattedDate date={post.data.pubDate} /></p>
              </a>
            </li>
          ))}
        </ul>
      </section>
    </main>
    <Footer />
  </body>
  </html>

